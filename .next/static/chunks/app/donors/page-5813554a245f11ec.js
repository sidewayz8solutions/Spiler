(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[796],{81905:function(e,t,n){Promise.resolve().then(n.bind(n,16769))},16769:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n(3827),r=n(60017);let a=(0,n(22020).Ue)((e,t)=>({donors:[],selectedDonors:[],filters:{status:null,minScore:null,search:""},sortBy:"score",setDonors:t=>e({donors:t}),addDonor:t=>e(e=>({donors:[...e.donors,t]})),updateDonor:(t,n)=>e(e=>({donors:e.donors.map(e=>e.id===t?{...e,...n}:e)})),deleteDonor:t=>e(e=>({donors:e.donors.filter(e=>e.id!==t)})),selectDonor:t=>e(e=>({selectedDonors:[...e.selectedDonors,t]})),deselectDonor:t=>e(e=>({selectedDonors:e.selectedDonors.filter(e=>e!==t)})),selectAll:()=>e(e=>({selectedDonors:e.donors.map(e=>e.id)})),deselectAll:()=>e({selectedDonors:[]}),setFilters:t=>e({filters:t}),setSortBy:t=>e({sortBy:t}),getFilteredDonors:()=>{let{donors:e,filters:n,sortBy:s}=t(),r=[...e];if(n.status&&(r=r.filter(e=>e.status===n.status)),n.minScore&&(r=r.filter(e=>e.score>=n.minScore)),n.search){let e=n.search.toLowerCase();r=r.filter(t=>{var n,s,r;return(null===(n=t.full_name)||void 0===n?void 0:n.toLowerCase().includes(e))||(null===(s=t.email)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(r=t.phone)||void 0===r?void 0:r.includes(e))})}return r.sort((e,t)=>{switch(s){case"score":return(t.score||0)-(e.score||0);case"name":return(e.full_name||"").localeCompare(t.full_name||"");case"amount":return(t.previous_donation_amount||0)-(e.previous_donation_amount||0);case"recent":return new Date(t.last_contact_date||0)-new Date(e.last_contact_date||0);default:return 0}}),r}}));function l(){let{donors:e,getFilteredDonors:t}=a();return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-spiler-darker to-spiler-dark",children:[(0,s.jsx)(r.Z,{}),(0,s.jsx)("main",{className:"max-w-6xl mx-auto px-4 py-8",children:(0,s.jsx)("h1",{className:"text-3xl font-bold text-gradient mb-8",children:"Donor Management"})})]})}},60017:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var s=n(3827),r=n(64090),a=n(8792),l=n(47907),i=n(55138),o=n(3478),c=n(3251),u=n(53404),d=n(89812),h=n(34102),x=n(28042),m=n(58621),f=n(12360);let p=[{href:"/",label:"Dashboard",icon:o.Z},{href:"/dialer",label:"Dialer",icon:c.Z},{href:"/queue",label:"Queue",icon:u.Z},{href:"/donors",label:"Donors",icon:d.Z},{href:"/analytics",label:"Analytics",icon:o.Z},{href:"/settings",label:"Settings",icon:h.Z}];function g(){let e=(0,l.usePathname)(),{user:t,signOut:n}=(0,i.a)(),[o,c]=(0,r.useState)(!1);return(0,s.jsxs)("nav",{className:"bg-spiler-dark/50 backdrop-blur-lg border-b border-indigo-500/10 sticky top-0 z-50",children:[(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)(a.default,{href:"/",className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCDE"}),(0,s.jsx)("span",{className:"text-xl font-bold text-gradient",children:"Spiler"})]}),(0,s.jsx)("div",{className:"hidden md:flex items-center space-x-1",children:p.map(t=>{let n=t.icon,r=e===t.href;return(0,s.jsxs)(a.default,{href:t.href,className:"\n                    flex items-center space-x-2 px-4 py-2 rounded-lg transition-all\n                    ".concat(r?"bg-indigo-500/20 text-indigo-400":"text-gray-400 hover:text-white hover:bg-white/5","\n                  "),children:[(0,s.jsx)(n,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:t.label})]},t.href)})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:null==t?void 0:t.email}),(0,s.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Sign out",children:(0,s.jsx)(x.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)("button",{onClick:()=>c(!o),className:"md:hidden p-2 text-gray-400 hover:text-white",children:o?(0,s.jsx)(m.Z,{className:"w-6 h-6"}):(0,s.jsx)(f.Z,{className:"w-6 h-6"})})]})]})}),o&&(0,s.jsx)("div",{className:"md:hidden bg-spiler-dark border-t border-indigo-500/10",children:(0,s.jsxs)("div",{className:"px-4 py-4 space-y-2",children:[p.map(t=>{let n=t.icon,r=e===t.href;return(0,s.jsxs)(a.default,{href:t.href,onClick:()=>c(!1),className:"\n                    flex items-center space-x-3 px-4 py-3 rounded-lg transition-all\n                    ".concat(r?"bg-indigo-500/20 text-indigo-400":"text-gray-400 hover:text-white hover:bg-white/5","\n                  "),children:[(0,s.jsx)(n,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:t.label})]},t.href)}),(0,s.jsxs)("button",{onClick:n,className:"flex items-center space-x-3 px-4 py-3 text-red-400 hover:bg-red-500/10 rounded-lg w-full",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Sign Out"})]})]})})]})}},8313:function(e,t,n){"use strict";n.r(t),n.d(t,{Providers:function(){return d},SupabaseContext:function(){return u},useSupabase:function(){return h}});var s=n(3827),r=n(64090),a=n(47907),l=n(58714),i=n(52688),o=n(47082);let c=new i.S,u=(0,r.createContext)(null);function d(e){let{children:t}=e,[n]=(0,r.useState)(()=>(0,l.createClientComponentClient)()),i=(0,a.useRouter)();return(0,r.useEffect)(()=>{let{data:{subscription:e}}=n.auth.onAuthStateChange(e=>{"SIGNED_OUT"===e&&i.push("/auth/login")});return()=>{e.unsubscribe()}},[n,i]),(0,s.jsx)(u.Provider,{value:n,children:(0,s.jsx)(o.aH,{client:c,children:t})})}let h=()=>{let e=(0,r.useContext)(u);if(!e)throw Error("useSupabase must be used within SupabaseProvider");return e}},55138:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var s=n(64090),r=n(8313),a=n(22020),l=n(65249);let i=(0,a.Ue)((0,l.tJ)(e=>({user:null,organization:null,teamMember:null,setUser:t=>e({user:t}),setOrganization:t=>e({organization:t}),setTeamMember:t=>e({teamMember:t}),reset:()=>e({user:null,organization:null,teamMember:null})}),{name:"spiler-auth"}));function o(){let e=(0,r.useSupabase)(),{user:t,organization:n,teamMember:a,setUser:l,setOrganization:o,setTeamMember:c,reset:u}=i(),[d,h]=(0,s.useState)(!0);async function x(){try{let{data:{user:t}}=await e.auth.getUser();if(t){l(t);let{data:n}=await e.from("team_members").select("\n            *,\n            organization:organizations(*)\n          ").eq("user_id",t.id).single();n&&(c(n),o(n.organization))}}catch(e){console.error("Error loading user:",e)}finally{h(!1)}}return(0,s.useEffect)(()=>{x();let{data:{subscription:t}}=e.auth.onAuthStateChange(async(e,t)=>{t?await x():u()});return()=>t.unsubscribe()},[]),{user:t,organization:n,teamMember:a,loading:d,signIn:async function(t,n){let{data:s,error:r}=await e.auth.signInWithPassword({email:t,password:n});if(r)throw r;return s},signUp:async function(t,n){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{data:r,error:a}=await e.auth.signUp({email:t,password:n,options:{data:s}});if(a)throw a;return r},signOut:async function(){let{error:t}=await e.auth.signOut();if(t)throw t;u()}}}}},function(e){e.O(0,[508,409,971,69,744],function(){return e(e.s=81905)}),_N_E=e.O()}]);